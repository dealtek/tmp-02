<!DOCTYPE html>
<html>
<head>

<title>Independent Drivers Consortium client local store</title>

<meta name="viewport" content="width=device-width, initial-scale=1"> 


<link rel="stylesheet" href="inc/jq/themes/theme-02.min.css" />
<link rel="stylesheet" href="inc/jq/themes/jquery.mobile.icons.min.css" />

<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>





<script>
    (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a);
    c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0];
    c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)};
    _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)})
    (window,document,"script","5653a9f734ac603f4600021a");
</script>




<script>
	$(function(){
		$( "[data-role='header'], [data-role='footer']" ).toolbar();
		});
    </script>

<script src="inc/jq/validate/dist/jquery.validate.js"></script>

<link href="mob.css" rel="stylesheet" type="text/css" />

 
</head>
<body>


<div data-role="header" data-position="fixed" data-theme="a">
<!--add header -->


<div class="box1 center1 boxblue">

<img src="pics/appbanner-320x60-main.png" width="315" height="60" align="middle" />

</div>

</div>

<!-- /header -->

<section id="page1" data-role="page">
<!-- need page1 id for form process -->
<div role="main" class="ui-content">
<div class="content" >
<div class="box1 center1" >
  
      
<!--INSERT START -->



<h3>IDC LOGIN</h3>



Login to our <strong class="green1">- Secure Server - </strong><br><br>

<a rel="external" class="big18" href="index.html">Go Back to Start</a><br>


<h1> <span class="blue1"><strong>
     <!-- where the response will be displayed -->
<div id='response'></div>
</strong></span>
</h1>

<table align="center" width="315" border="0">

  <tr>
    <td valign="TOP" background="pics/bk2.jpg">
      
       
<form action=""  method="POST" name="nowform" id="nowform">
<div  class="box1 center1">


<!--(tmp login 45021 pass 123456) <br> -->
<div id='nowform_Client_ID_errorloc' class="error_strings"></div>

<div data-role="fieldcontain"></div>
	<label for="Client_ID">Enter Your IDCapp ID*: </label><br>
<input id="Client_ID" name="Client_ID" type="text" size="15" class="print_data_22" />			
			

<!--<p>Drivers License-PASSWORD*:<br> -->
<div id='nowform_webpass_errorloc' class="error_strings"></div>

<div data-role="fieldcontain"></div>
<label for="webpass">Drivers License-PASSWORD*:</label><br>
	<input id="webpass" name="webpass" type="password" size="15" class="print_data_22" />			


</p>
<hr />
<input data-role="submit" type="submit" value="Login">


<input type="hidden" name="trylogin" value= "true" >
</form>



<br>
(just numbers and letters)<br>
(Your Drivers License Number<br>
Is Your Password)

<br>temp pass <span id="webpass22"></span><br>


</td>
  </tr>
</table>




<script>





$("#page1").on("pageinit", function() {
        //alert ("test1");

$("form").validate({
		rules: {
                Client_ID: {
                    required: true
                },
                webpass: {
                    required: true
                }
            },
            errorPlacement: function(error, element) {
                error.insertBefore(element.parent());

                //alert ("test2");
            },

		submitHandler: function(form) {
        //code that should happen after validation if no errors are found goes here
        
        //alert ("success");
	
// form valication successful

 var Client_ID  = form.Client_ID.value;
	var webpass = form.webpass.value;


//localStorage.setItem("PUC_Number", form.PUC_Number.value);

// start post	
	
	
// show that something is loading
		$('#response').html("<b>Logging Into IDC...</b>");
		
		/*
		 * 'post_receiver.php' - where you will pass the form data
		 * $(this).serialize() - to easily read form data
		 * function(data){... - data contains the response from post_receiver.php
		 */
//client-update-contact.php	- client-update-ztmp.php	 
$.post('https://idcapp.com/app-data/login-main.php', {			 

//Client_ID: localStorage.getItem("Client_ID"),

//PUC_Number: localStorage.getItem("PUC_Number"),
	
Client_ID: Client_ID,
webpass: webpass,		
		
}, function(data){
			
			// show the response
			// bak $('#response').html(data);
			// FIX THIS WITH BETTER SOON - do dbetter in php page
			$('#response').html("SUCCESS");
			
			// alert("Data: " + data + "\nStatus: " + status);
console.log ('data', data);
output = "";

var date_lastlogin = new Date();
localStorage.setItem('date_lastlogin', date_lastlogin);
	
$.each(data, function(key, value) {
console. log ('item', key, value);

//output += "<li><a href=\"#\">" + value.Client_ID;  
//output += " " + value.Contact_First + " " + value.Contact_Last + "</a></li>";

localStorage.setItem("Contact_First", value.Contact_First);
localStorage.setItem("Contact_Last", value.Contact_Last);
localStorage.setItem("Client_ID", value.Client_ID);
localStorage.setItem("password", value.password);
localStorage.setItem("type_of_company_number", value.type_of_company_number);

localStorage.setItem("Company", value.Company);
localStorage.setItem("Phone1", value.Phone1);
localStorage.setItem("Phone2", value.Phone2);
localStorage.setItem("Fax", value.Fax);
localStorage.setItem("Address", value.Address);
localStorage.setItem("City", value.City);
localStorage.setItem("State", value.State);
localStorage.setItem("Zip", value.Zip);
localStorage.setItem("Billing_Company_Name", value.Billing_Company_Name);
localStorage.setItem("F_Name_Billing", value.F_Name_Billing);
localStorage.setItem("L_Name_Billing", value.L_Name_Billing);
localStorage.setItem("Billing_Address", value.Billing_Address);
localStorage.setItem("Billing_City", value.Billing_City);
localStorage.setItem("Billing_State", value.State);
localStorage.setItem("Billing_Zip", value.Billing_Zip);
localStorage.setItem("Billing_Phone", value.Billing_Phone);
localStorage.setItem("Billing_Fax", value.Billing_Fax);
localStorage.setItem("email_Billing_Address", value.email_Billing_Address);
//localStorage.setItem("email_Billing_Address", 'yo22em');
localStorage.setItem("cl_emp_First", value.cl_emp_First);
localStorage.setItem("cl_emp_Last", value.cl_emp_Last);

localStorage.setItem("cl_emp_City_Taxi_Permit_No", value.cl_emp_City_Taxi_Permit_No);
localStorage.setItem("cl_emp_City_Taxi_Permit_Expiration", value.cl_emp_City_Taxi_Permit_Expiration);
// nah dupe fields to dump localStorage.setItem("cl_emp_PUC_Number", value.cl_emp_PUC_Number);

localStorage.setItem("cl_emp_Drivers_License_No", value.cl_emp_Drivers_License_No);
localStorage.setItem("cl_emp_Notify_Email", value.cl_emp_Notify_Email);
localStorage.setItem("cl_emp_Notify_PhoneText", value.cl_emp_Notify_PhoneText);
localStorage.setItem("cl_emp_Social_Security", value.cl_emp_Social_Security);
localStorage.setItem("cl_emp_security_code", value.cl_emp_security_code);

localStorage.setItem("PUC_Number", value.PUC_Number);
localStorage.setItem("PUC_Date", value.PUC_Date);
localStorage.setItem("Kind_of_Company", value.Kind_of_Company);
localStorage.setItem("Date_Signup", value.Date_Signup);
localStorage.setItem("Date_Terminated", value.Date_Terminated);
localStorage.setItem("date_term_web_CL", value.date_term_web_CL);

localStorage.setItem("Date_Entered", value.Date_Entered);
localStorage.setItem("Status", value.Status);
localStorage.setItem("Type", value.Type);

localStorage.setItem("cl_toc_City", value.cl_toc_City);
localStorage.setItem("cl_toc_term_reason_toggle", value.cl_toc_term_reason_toggle);
localStorage.setItem("email_Confidential_Email", value.email_Confidential_Email);
localStorage.setItem("email_Agency", value.email_Agency);



localStorage.setItem("date_term_web_CL", value.date_term_web_CL);
localStorage.setItem("cl_toc_cert_desc_new", value.cl_toc_cert_desc_new);
localStorage.setItem("cl_toc_cert_desc_renew", value.cl_toc_cert_desc_renew);
localStorage.setItem("cl_toc_cert_fee_signup", value.cl_toc_cert_fee_signup);
localStorage.setItem("cl_toc_cert_fee_renewal", value.cl_toc_cert_fee_renewal);
localStorage.setItem("cl_toc_CommonName", value.cl_toc_CommonName);
localStorage.setItem("date_TAXI_1stpaid_certific", value.date_TAXI_1stpaid_certific);
localStorage.setItem("Date_TAXI_1st_yr_certi_expire", value.Date_TAXI_1st_yr_certi_expire);
localStorage.setItem("cl_emp_date_last_drug_db", value.cl_emp_date_last_drug_db);
localStorage.setItem("cl_emp_date_last_alc_db", value.cl_emp_date_last_alc_db);

localStorage.setItem("cl_emp_Division_ID_Num", value.cl_emp_Division_ID_Num);
localStorage.setItem("cl_emp_Division_Name", value.cl_emp_Division_Name);
localStorage.setItem("cl_toc_owner_email_Confidential_Email", value.cl_toc_owner_email_Confidential_Email);
localStorage.setItem("cl_toc_owner_contact_full_c", value.cl_toc_owner_contact_full_c);
localStorage.setItem("tocNum1", value.tocNum1);
localStorage.setItem("tocNum2", value.tocNum2);
localStorage.setItem("tocNum3", value.tocNum3);
localStorage.setItem("tocNum4", value.tocNum4);
localStorage.setItem("tocNum5", value.tocNum5);
localStorage.setItem("cl_tocextra1_CommonName", value.cl_tocextra1_CommonName);
localStorage.setItem("cl_tocextra2_CommonName", value.cl_tocextra2_CommonName);
localStorage.setItem("cl_tocextra3_CommonName", value.cl_tocextra3_CommonName);
localStorage.setItem("cl_tocextra4_CommonName", value.cl_tocextra4_CommonName);
localStorage.setItem("cl_tocextra5_CommonName", value.cl_tocextra5_CommonName);
localStorage.setItem("mgr1_email_Confidential_Email", value.mgr1_email_Confidential_Email);
localStorage.setItem("mgr2_email_Confidential_Email", value.mgr2_email_Confidential_Email);
localStorage.setItem("mgr3_email_Confidential_Email", value.mgr3_email_Confidential_Email);
localStorage.setItem("mgr4_email_Confidential_Email", value.mgr4_email_Confidential_Email);
localStorage.setItem("mgr5_email_Confidential_Email", value.mgr5_email_Confidential_Email);
localStorage.setItem("mgr1_contact_full_c", value.mgr1_contact_full_c);
localStorage.setItem("mgr2_contact_full_c", value.mgr2_contact_full_c);
localStorage.setItem("mgr3_contact_full_c", value.mgr3_contact_full_c);
localStorage.setItem("mgr4_contact_full_c", value.mgr4_contact_full_c);
localStorage.setItem("mgr5_contact_full_c", value.mgr5_contact_full_c);
localStorage.setItem("LabMasterAccount", value.LabMasterAccount);
localStorage.setItem("cl_toc_Federal", value.cl_toc_Federal);

localStorage.setItem("z_mod_date", value.z_mod_date);
localStorage.setItem("z_webtmp3", value.z_webtmp3);

// initialize these
localStorage.setItem("rt_completecheck", "");
//alert("pre_emp_completecheck");
// can't use foundzero
localStorage.setItem("pre_emp_completecheck", "needcheck");
localStorage.setItem("lastcheck_test", "01/01/2015");

//new 11-08-15 (05-07-06 PM)

localStorage.setItem("cert_calc", value.cert_calc);
localStorage.setItem("certfee_calc", value.certfee_calc);

localStorage.setItem("date_TAXI_annual_renewexpir_certification", value.date_TAXI_annual_renewexpir_certification);

localStorage.setItem("date_TAXI_paid_Annual_Renewal_fee", value.date_TAXI_paid_Annual_Renewal_fee);


localStorage.setItem("cl_toc_type_of_consortium", value.cl_toc_type_of_consortium);
localStorage.setItem("Signup_date", value.Signup_date);
localStorage.setItem("sdate", value.sdate);
localStorage.setItem("xdate", value.xdate);
localStorage.setItem("diffdaysint", value.diffdaysint);

if ( value.diffdaysint <= 365){
localStorage.setItem("certgo", 'new');	
}else{
localStorage.setItem("certgo", 'renew');			
}	

localStorage.setItem("done1", "test1");

window.location.replace("dashboard.html");
		
});
			//$('#response2').html(data);
		}).fail(function() {
		
			// just in case posting your form failed
			$('#response').html("Login Failed. Please try again");
			//alert( "Posting failed." );
			
		});

		// to prevent refreshing the whole page page
		return false;


			
	
//}




//9999999999		
		
		
        
    },
/*			
showErrors: function(errorMap, errorList) {
// this prevents errors showing
		
		//code that should happen after validation if errors are found goes here
        //alert ("no success yet");
}			
*/			
});
       //alert ("test3");
}

);

//alert("test4");

</script>



<script>

// pre populate

if (localStorage.getItem("Client_ID") !=""){
document.forms['nowform'].elements['Client_ID'].value = localStorage.getItem("Client_ID");
}


//document.forms['nowform'].elements['webpass'].value = localStorage.getItem("cl_emp_Drivers_License_No");

//

if (localStorage.getItem("password") !=""){
document.forms['nowform'].elements['webpass'].value = localStorage.getItem("password");
}


//deliberate error for track test
//
document.forms['nowform'].elements['webpass999'].value = localStorage.getItem("password999");


// tmp see document.getElementById('webpass22').textContent = localStorage.getItem("password");
 
//document.forms['nowform'].elements['PUC_Number'].value = localStorage.getItem("PUC_Number");


</script>





<!--INSERT END -->

</div><!-- end .box -->
</div><!-- end .content -->
</div><!-- /ui-content -->
  
</section><!-- /page -->

<!--
<footer data-role="footer" class="ui-barNAH" data-position="fixed" data-theme="a">
<div class="ui-grid-c boxblue">

</div>
</footer> -->
<!--add footer -->
<!-- /footer -->

</body>
</html>
